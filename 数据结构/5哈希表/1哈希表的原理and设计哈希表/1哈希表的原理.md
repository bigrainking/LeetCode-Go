[toc]





# 一、哈希表的原理



## 1 原理

1. **作用**：用来快速判断一个值是否在集合里面。 (枚举法O(N), 哈希表O(1)).哈希表通过

<img src="pic/1%E5%93%88%E5%B8%8C%E8%A1%A8%E7%9A%84%E5%8E%9F%E7%90%86.assets/image-20220531160015125.png" alt="image-20220531160015125" style="zoom:25%;" />

2. **插入** :当我们想新插入一个间时，将`key`(键) 通过`哈希函数`映射到`存储桶`中。 比如 2 通过哈希函数 tong=key%5 映射到 2号桶

 

3. **查找**：当我们想查找一个键时，哈希表将同样通过`哈希函数`找到对应的存储的桶。并且在对应的桶中搜索，如果没有搜索到那么哈希表中不存在这个数



2 示例：

下面哈希函数为 y = key%5

1. **插入** : 1987 % 5 = 2 进入2号桶

   ....

2. **查找：** 查找23 ， 23 % 5 = 3， 在3号桶中查找，结果没有找到，说明23不在哈希表中。

<img src="pic/1%E5%93%88%E5%B8%8C%E8%A1%A8%E7%9A%84%E5%8E%9F%E7%90%86.assets/image-20220531115828858.png" alt="image-20220531115828858" style="zoom:25%;" />



## 2 哈希集合and哈希映射

哈希集合相当于只有key的哈希表。不存储值

哈希映射相当于就是key-Value 的哈希表

（补充）

# 二、哈希函数

哈希表中键与值的映射通过哈希函数实现

<img src="pic/1%E5%93%88%E5%B8%8C%E8%A1%A8%E7%9A%84%E5%8E%9F%E7%90%86.assets/image-20220531152532148.png" alt="image-20220531152532148" style="zoom: 25%;" />





## 参考

[LeetBook](https://leetcode.cn/leetbook/read/hash-table/xht3is/)

[代码随想录](https://www.programmercarl.com/%E5%93%88%E5%B8%8C%E8%A1%A8%E7%90%86%E8%AE%BA%E5%9F%BA%E7%A1%80.html#%E5%B8%B8%E8%A7%81%E7%9A%84%E4%B8%89%E7%A7%8D%E5%93%88%E5%B8%8C%E7%BB%93%E6%9E%84)





# 三、冲突



**我们期望：** 最好的情况是每个键都与一个桶一一对应。常常会出现一个多个键值对应一个桶，这就是 `冲突`，冲突需要解决



冲突解决需要解决的问题？

- 同一个桶内多个值如何组织？

   > 少数值可以直接用数组，多数值需要高度平衡的二叉树

- 同一个桶中分配了多个值怎么办？
- 如何快速在一个桶中找到指定的值？





### 3.1 哈希碰撞

两个键都映射到了同一索引位置，叫哈希碰撞。如下图

<img src="pic/1%E5%93%88%E5%B8%8C%E8%A1%A8%E7%9A%84%E5%8E%9F%E7%90%86.assets/image-20220531160541314.png" alt="image-20220531160541314" style="zoom:33%;" />

解决哈希碰撞的办法有：

- 拉链法
- 线性探测法
- 开放定址法



#### 1）拉链法

用一个较小的数组作为索引数组，

将碰撞的元素都放在同一个索引下，用一个链表组织。

- 插入：碰撞的元素要插入时就在链表后面接上一个元素
- 查找：再对应的链表依次查找

<img src="pic/1%E5%93%88%E5%B8%8C%E8%A1%A8%E7%9A%84%E5%8E%9F%E7%90%86.assets/image-20220531160738077.png" alt="image-20220531160738077" style="zoom:33%;" />



#### 2）线性探测法(开放地址法)：

当两个元素冲突时，比如下面`小王`映射到索引1，但此时`小李`已经在1号位置，小王采用 `线性探测法`查看小李的下一个位置是否有元素，如果没有则选择这个位置存储，否则继续向后选择



**注意：**这种方法的`TableSize`(哈希表的存储数组长度)必须大于`DataSize`(待插入值的个数)

<img src="pic/1%E5%93%88%E5%B8%8C%E8%A1%A8%E7%9A%84%E5%8E%9F%E7%90%86.assets/image-20220531161106729.png" alt="image-20220531161106729" style="zoom:33%;" />



# 四、使用

当我们遇到了 `需要快速判断一个元素是否在集合中时，立刻要想到哈希表`



- 但哈希表牺牲了空间（至少要借助额外的set、数组、map等）换取了时间